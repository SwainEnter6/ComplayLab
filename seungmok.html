<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="seungmok.css">
</head>
<body>
    <div class="imgs">
        <div class="main"> 
            <img src="imgs/main.png" alt="mainimg"> <!--z-index: 1-->
        </div>
        <div class="lemon">
            <img src="imgs/lemon.png" alt="lemonimg"> <!--z-index: 2-->
        </div>
        <div class="arrow"> <!--z-index: 2-->
            <div class="arrowright"> 
                <img src="imgs/arrowright2.jpg" alt="Rarrowimg" class="draggable" draggable="true" ondragstart="drag(event)"> 
            </div>
            <div class="arrowleft"> 
                <img src="imgs/arrowleft2.jpg" alt="Larrowimg" class="draggable" draggable="true" ondragstart="drag(event)">
            </div>
        </div>
        <div class="drop-area" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
    </div>

    

    <script>
        const draggables = document.querySelectorAll(".draggable");
        const containers = document.querySelectorAll(".arrow");

        draggables.forEach(draggable => {
        draggable.addEventListener("dragstart", () => {
        draggable.classList.add("dragging");
        });

        draggable.addEventListener("dragend", () => {
        draggable.classList.remove("dragging");
        });
        });

        containers.forEach(container => {
            container.addEventListener("dragover", e => {
                e.preventDefault();
                const afterElement = getDragAfterElement(container, e.clientX);
                const draggable = document.querySelector(".dragging");
                if (afterElement === undefined) {
                    container.appendChild(draggable);
                } else {
                    container.insertBefore(draggable, afterElement);
                }
            });
        });

        function getDragAfterElement(container, x) {
            const draggableElements = [
                ...container.querySelectorAll(".draggable:not(.dragging)"),
            ];

            return draggableElements.reduce(
                (closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = x - box.left - box.width / 2;
                // console.log(offset);
            if (offset < 0 && offset > closest.offset) {
                return { offset: offset, element: child };
            } else {
                return closest;
            }
            },
            { offset: Number.NEGATIVE_INFINITY },
            ).element;
        }
    </script>
</body>
</html>
