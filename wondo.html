<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>드래그 앤 드롭</title>
    <link rel="stylesheet" href="wondo.css">
</head>
<body>

<div id="source-box"> 
    <!-- 드래그 가능한 이미지들 -->
    <img src="./imgs/arrowleft2.jpg" class="draggable" draggable="true" data-image="image1">
    <img src="./imgs/arrowright2.jpg" class="draggable" draggable="true" data-image="image2">
</div>

<!-- 드롭 타겟이 될 박스들 -->
<div class="target-box" id="box1"></div>
<div class="target-box" id="box2"></div>
<div class="target-box" id="box3"></div>
<div class="target-box" id="box4"></div>

<script>
    document.querySelectorAll('.draggable').forEach(img => {
        img.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('image/id', e.target.dataset.image);// 드래그 시작 시, 이미지 ID를 데이터 전송 객체에 설정
        });
    });

    document.querySelectorAll('.target-box').forEach(box => {
        box.addEventListener('dragover', (e) => {
            e.preventDefault(); // 드래그 오버 이벤트의 기본 동작을 방지하여 드롭 이벤트를 허용
        });

        box.addEventListener('drop', (e) => {
            e.preventDefault();  // 드롭 이벤트의 기본 동작을 방지
            const imageId = e.dataTransfer.getData('image/id'); // 드롭 이벤트 시, 데이터 전송 객체에서 이미지 ID 가져오기
            const originalImage = document.querySelector(`img[data-image="${imageId}"]`); // 해당 ID를 가진 원본 이미지 요소 선택
            
            // 기존에 박스에 이미지가 있으면 제거하는 로직
            if (box.childNodes.length > 0) {
                box.removeChild(box.childNodes[0]); // 첫 번째 자식 이미지 제거
            }
            
            // 복사 된 이미지를 대상 박스에 추가하는 로직
            const clonedImage = originalImage.cloneNode(true); // 원본 이미지를 복제
            clonedImage.addEventListener('click', function() {
                box.removeChild(clonedImage); // 클릭 시 이미지 제거
            });
            box.appendChild(clonedImage); // 복제된 이미지를 대상 박스에 추가
        });
    });
</script>
</body>
</html>